(this["webpackJsonpcoup-modified"]=this["webpackJsonpcoup-modified"]||[]).push([[0],Array(24).concat([function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/10c.4df13b1d.svg"},function(e,t,n){e.exports=n.p+"static/media/10d.37c85c54.svg"},function(e,t,n){e.exports=n.p+"static/media/10h.2d6b7c39.svg"},function(e,t,n){e.exports=n.p+"static/media/10s.cab5184b.svg"},function(e,t,n){e.exports=n.p+"static/media/1c.0e32154f.svg"},function(e,t,n){e.exports=n.p+"static/media/1d.8621e2f7.svg"},function(e,t,n){e.exports=n.p+"static/media/1h.71322089.svg"},function(e,t,n){e.exports=n.p+"static/media/1s.7c10f7e6.svg"},function(e,t,n){e.exports=n.p+"static/media/1s2.841cbc9f.svg"},function(e,t,n){e.exports=n.p+"static/media/jc.ab199155.svg"},function(e,t,n){e.exports=n.p+"static/media/jd.bb320848.svg"},function(e,t,n){e.exports=n.p+"static/media/jh.b0626f15.svg"},function(e,t,n){e.exports=n.p+"static/media/js.8564915b.svg"},function(e,t,n){e.exports=n.p+"static/media/qc.07e3d186.svg"},function(e,t,n){e.exports=n.p+"static/media/qd.15be0e86.svg"},function(e,t,n){e.exports=n.p+"static/media/qh.5eb8047a.svg"},function(e,t,n){e.exports=n.p+"static/media/qs.0a16987a.svg"},function(e,t,n){e.exports=n.p+"static/media/kc.376e8f60.svg"},function(e,t,n){e.exports=n.p+"static/media/kd.0569d8f3.svg"},function(e,t,n){e.exports=n.p+"static/media/kh.47695248.svg"},function(e,t,n){e.exports=n.p+"static/media/ks.c5800ee6.svg"},function(e,t,n){e.exports=n.p+"static/media/b.c856f238.svg"},,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/icon.06725867.svg"},,,,,,function(e,t,n){e.exports=n(185)},,,,,,function(e,t,n){},function(e,t,n){var a={"./10c.svg":59,"./10d.svg":60,"./10h.svg":61,"./10s.svg":62,"./1c.svg":63,"./1d.svg":64,"./1h.svg":65,"./1s.svg":66,"./1s2.svg":67};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=109},function(e,t,n){var a={"./jc.svg":68,"./jd.svg":69,"./jh.svg":70,"./js.svg":71};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=110},function(e,t,n){var a={"./qc.svg":72,"./qd.svg":73,"./qh.svg":74,"./qs.svg":75};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=111},function(e,t,n){var a={"./kc.svg":76,"./kd.svg":77,"./kh.svg":78,"./ks.svg":79};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=112},function(e,t,n){var a={"./10c.svg":59,"./10d.svg":60,"./10h.svg":61,"./10s.svg":62,"./1c.svg":63,"./1d.svg":64,"./1h.svg":65,"./1s.svg":66,"./1s2.svg":67,"./2c.svg":114,"./2d.svg":115,"./2h.svg":116,"./2s.svg":117,"./3c.svg":118,"./3d.svg":119,"./3h.svg":120,"./3s.svg":121,"./4c.svg":122,"./4d.svg":123,"./4h.svg":124,"./4s.svg":125,"./5c.svg":126,"./5d.svg":127,"./5h.svg":128,"./5s.svg":129,"./6c.svg":130,"./6d.svg":131,"./6h.svg":132,"./6s.svg":133,"./7c.svg":134,"./7d.svg":135,"./7h.svg":136,"./7s.svg":137,"./8c.svg":138,"./8d.svg":139,"./8h.svg":140,"./8s.svg":141,"./9c.svg":142,"./9d.svg":143,"./9h.svg":144,"./9s.svg":145,"./b.svg":80,"./jc.svg":68,"./jd.svg":69,"./jh.svg":70,"./js.svg":71,"./kc.svg":76,"./kd.svg":77,"./kh.svg":78,"./ks.svg":79,"./qc.svg":72,"./qd.svg":73,"./qh.svg":74,"./qs.svg":75};function r(e){var t=c(e);return n(t)}function c(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=113},function(e,t,n){e.exports=n.p+"static/media/2c.24b22448.svg"},function(e,t,n){e.exports=n.p+"static/media/2d.7321e4e8.svg"},function(e,t,n){e.exports=n.p+"static/media/2h.6a2deba7.svg"},function(e,t,n){e.exports=n.p+"static/media/2s.4edf0336.svg"},function(e,t,n){e.exports=n.p+"static/media/3c.292b2a98.svg"},function(e,t,n){e.exports=n.p+"static/media/3d.49f398ea.svg"},function(e,t,n){e.exports=n.p+"static/media/3h.813d6a27.svg"},function(e,t,n){e.exports=n.p+"static/media/3s.49be5d05.svg"},function(e,t,n){e.exports=n.p+"static/media/4c.275c07ae.svg"},function(e,t,n){e.exports=n.p+"static/media/4d.a1bab126.svg"},function(e,t,n){e.exports=n.p+"static/media/4h.7d861d4a.svg"},function(e,t,n){e.exports=n.p+"static/media/4s.38e6c481.svg"},function(e,t,n){e.exports=n.p+"static/media/5c.e524096b.svg"},function(e,t,n){e.exports=n.p+"static/media/5d.36990e4e.svg"},function(e,t,n){e.exports=n.p+"static/media/5h.13524646.svg"},function(e,t,n){e.exports=n.p+"static/media/5s.3f2e6976.svg"},function(e,t,n){e.exports=n.p+"static/media/6c.1efb89f0.svg"},function(e,t,n){e.exports=n.p+"static/media/6d.00acd557.svg"},function(e,t,n){e.exports=n.p+"static/media/6h.496542d0.svg"},function(e,t,n){e.exports=n.p+"static/media/6s.fbf22d0c.svg"},function(e,t,n){e.exports=n.p+"static/media/7c.43841bb1.svg"},function(e,t,n){e.exports=n.p+"static/media/7d.ca2cf372.svg"},function(e,t,n){e.exports=n.p+"static/media/7h.67c1bf1d.svg"},function(e,t,n){e.exports=n.p+"static/media/7s.547539e8.svg"},function(e,t,n){e.exports=n.p+"static/media/8c.f067c3a4.svg"},function(e,t,n){e.exports=n.p+"static/media/8d.1d74e84a.svg"},function(e,t,n){e.exports=n.p+"static/media/8h.c45d93f6.svg"},function(e,t,n){e.exports=n.p+"static/media/8s.2fd0f9f5.svg"},function(e,t,n){e.exports=n.p+"static/media/9c.93c3799f.svg"},function(e,t,n){e.exports=n.p+"static/media/9d.deb96fda.svg"},function(e,t,n){e.exports=n.p+"static/media/9h.215de1e1.svg"},function(e,t,n){e.exports=n.p+"static/media/9s.cc774615.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(95),o=n.n(c),s=n(12),i=n(53),l=n(3),u=n.n(l),p=n(7),d=n(15),f=n(187),h=(n(108),n(96)),g=n.n(h),m=function(e){return r.a.createElement(f.a,{className:"lobby-area"},r.a.createElement("h3",null,"Scuttle",r.a.createElement("img",{id:"icon",src:g.a,alt:"icon"})),r.a.createElement("hr",null),e.children,r.a.createElement("small",null,"created by vindara and jshu (december 2020)"))},v=n(4),E=n(5),y=n(97),b=window.location,C=b.origin,k=(b.protocol,b.hostname,C),O=function(){function e(){Object(v.a)(this,e),this.api=y.a.create({prefixUrl:"".concat(k,"/games/").concat("Scuttle")})}return Object(E.a)(e,[{key:"createRoom",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.post("create",{json:{numPlayers:t}}).json();case 3:return n=e.sent,e.abrupt("return",n.gameID);case 7:e.prev=7,e.t0=e.catch(0),console.log("failed to create room:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"joinRoom",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.post(t+"/join",{json:{playerID:n,playerName:a}}).json();case 3:return r=e.sent,c=r.playerCredentials,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log("failed to join room:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"leaveRoom",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.post(t+"/leave",{json:{playerID:n,credentials:a}}).json();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("failed to leave room:",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"playAgain",value:function(){var e=Object(p.a)(u.a.mark((function e(t,n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.post(t+"/playAgain",{json:{playerID:n,credentials:a}}).json();case 3:return r=e.sent,e.abrupt("return",r.nextRoomID);case 7:e.prev=7,e.t0=e.catch(0),console.log("failed to play again:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"getPlayers",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.get(t).json();case 2:return n=e.sent,e.abrupt("return",n.players);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRooms",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.get("").json();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),j=n(188),x=n(189),S=n(192),F=new O,w=function(e){var t=e.history,n=Object(a.useState)(""),c=Object(d.a)(n,2),o=c[0],s=c[1],i=Object(a.useState)(""),l=Object(d.a)(i,2),f=l[0],h=l[1],g=Object(a.useState)(""),v=Object(d.a)(g,2),E=v[0],y=v[1],b=Object(a.useState)(""),C=Object(d.a)(b,2),k=C[0],O=C[1];Object(a.useEffect)((function(){var e;return t.location.state&&t.location.state.invalidRoom&&(O("Room does not exist."),e=setTimeout((function(){O(""),t.replace()}),4e3)),function(){clearTimeout(e)}}),[t]);var w=function(e,t){" "===e.key&&(t&&0!==t.length&&" "!==t.substring(t.length-1,t.length)||e.preventDefault())},I=function(e,t,n){localStorage.setItem("name",e),localStorage.setItem("id",t),localStorage.setItem("credentials",n)},P=function(){var e=Object(p.a)(u.a.mark((function e(n,a){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.getPlayers(n);case 3:r=e.sent,-1===r.filter((function(e){return e.name})).map((function(e){return e.name})).indexOf(a)?(c=r.find((function(e){return!e.name})).id,F.joinRoom(n,c,a).then((function(e){I(a,c,e),t.push("/rooms/"+n)}))):(O("name already taken!"),h(""),document.getElementById("joinName").value=""),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),O("Room does not exist."),s(""),document.getElementById("roomIdentification").value="";case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(m,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{className:"border"},r.a.createElement("h6",null,"Create Game"),r.a.createElement("label",null,"Name:"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",maxLength:"".concat(12),spellCheck:"false",autoComplete:"off",onKeyDown:function(e){return w(e,E)},onChange:function(e){return y(e.target.value)},onPaste:function(e){return e.preventDefault()}})),r.a.createElement(S.a,{size:"sm",variant:"success",disabled:0===E.length,onClick:function(){F.createRoom(2).then((function(e){P(e,E)}))}},"Create")),r.a.createElement(x.a,{className:"border"},r.a.createElement("h6",null,"Join Game"),r.a.createElement("label",null,"Room ID:"),r.a.createElement("div",null,r.a.createElement("input",{id:"roomIdentification",type:"text",maxLength:"".concat(9),spellCheck:"false",autoComplete:"off",onKeyDown:function(e){return w(e)},onChange:function(e){return s(e.target.value)}})),r.a.createElement("label",null,"Name:"),r.a.createElement("div",null,r.a.createElement("input",{id:"joinName",type:"text",maxLength:"".concat(12),spellCheck:"false",autoComplete:"off",onKeyDown:function(e){return w(e,f)},onChange:function(e){return h(e.target.value)},onPaste:function(e){return e.preventDefault()}})),r.a.createElement(S.a,{size:"sm",variant:"success",className:"lobby-btn",disabled:9!==o.length||0===f.length,onClick:function(){return P(o,f)}},"Join"))),r.a.createElement("div",null,k))},I=n(100),P=n(41),T=n(9),V=n(10),D=(n(24),n(190)),N=n(16);function A(){for(var e=["Spades","Diamonds","Clubs","Hearts"],t=["Ace","2","3","4","5","6","7","8","9","10","Jack","Queen","King"],n=[],a=0;a<e.length;a++)for(var r=0;r<t.length;r++){var c={Value:t[r],Suit:e[a],id:t[r]+e[a],Point:"Ace"===t[r]?1:parseInt(t[r])?parseInt(t[r]):0};n.push(c)}return n}var G=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}};var J=function(e){var t,a={},r=Object(N.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;switch(c.Value){case"Ace":a[c.id]=n(109)("./1"+c.Suit.charAt(0).toLowerCase()+".svg");break;case"Jack":a[c.id]=n(110)("./j"+c.Suit.charAt(0).toLowerCase()+".svg");break;case"Queen":a[c.id]=n(111)("./q"+c.Suit.charAt(0).toLowerCase()+".svg");break;case"King":a[c.id]=n(112)("./k"+c.Suit.charAt(0).toLowerCase()+".svg");break;default:a[c.id]=n(113)("./"+parseInt(c.Value)+c.Suit.charAt(0).toLowerCase()+".svg")}}}catch(o){r.e(o)}finally{r.f()}return console.log(a),a.hidden=n(80),a}(A());var q=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){for(var e=this,t=this.props.hand,n=[],a={marginBottom:"0.5rem"},c=function(c){var o=t[c],s=J[o.id];n.push(r.a.createElement(x.a,{key:o.id},r.a.createElement(D.a,{src:s,thumbnail:!0,style:a,className:e.props.inActionStage?"targetable":"",onClick:e.props.inActionStage?function(){return e.props.toggleSelectedCard(o)}:function(){}})))},o=0;o<t.length;o++)c(o);return r.a.createElement(j.a,{md:5,className:this.props.inActionStage?"active":""},n)}}]),n}(r.a.Component),R=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.playerID,t=this.props.playerIDOpponent,n=this.props.fields,a=this.props.specialFields,c=this.props.graveyard,o=this.props.deck,s=this.props.jacks,i=this.props.hand,l=this.props.selectedCard,u="Jack"===l.Value||"Queen"===l.Value||"King"===l.Value,p=u,d=0===n[t].length||u,f=n[t].some((function(e){return s[e.id]})),h=a[t].filter((function(e){return"Queen"===e.Value})).length,g="2"===l.Value&&!f&&0===a[t].length||"3"===l.Value&&0===c.length||"5"===l.Value&&o.length<2||"7"===l.Value&&1===i[e].length||"9"===l.Value&&0===n[e].length&&0===n[t].length&&0===a[t].length||"10"===l.Value||"Jack"===l.Value&&0===n[t].length||"Jack"===l.Value&&h>0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{size:"sm",disabled:p,onClick:this.props.playCardValue},"Play Value")," ",r.a.createElement(S.a,{size:"sm",disabled:d,onClick:this.props.playCardScuttle},"Scuttle")," ",r.a.createElement(S.a,{size:"sm",disabled:g,onClick:this.props.playCardEffect},"Play Effect"))}}]),n}(r.a.Component),L=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{size:"sm",onClick:this.props.accept},"Accept")," ",r.a.createElement(S.a,{size:"sm",onClick:function(){return e.props.counter(e.props.playerID)},disabled:!this.props.has2},"Counter"))}}]),n}(r.a.Component),z=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){if(e.props.inPopup){if(e.props.inChoosingScuttleStage&&e.props.isOpponentField)return function(){return e.props.chooseScuttleTarget(t)};if(e.props.inChoosingEffectStage){if(e.props.isOpponentField)return function(){return e.props.chooseEffectTarget(t,"opponentField")};if(e.props.isPlayerField)return function(){return e.props.chooseEffectTarget(t,"playerField")}}}return function(){}},e.targetable=function(){if(e.props.inPopup){if(e.props.inChoosingScuttleStage&&e.props.isOpponentField)return!0;if(e.props.inChoosingEffectStage){if(e.props.isOpponentField)return!0;if(e.props.isPlayerField)return!0}}return!1},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.field,t=this.props.jacks,n=[],a={textAlign:"center"};console.log(e);for(var c=0;c<e.length;c++){var o=e[c],s=J[o.id];n.push(r.a.createElement(x.a,{key:o.id,style:{}},r.a.createElement(D.a,{src:s,thumbnail:!0,style:a,className:this.props.inPopup?"targetable":"",onClick:this.onClick(o)}),t[o.id]&&r.a.createElement("span",null,"(",t[o.id][1],",j",t[o.id][2].length,")")))}return n}}]),n}(r.a.Component),K=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onClick=function(t){if(e.props.inPopup&&e.props.inChoosingEffectStage){if(e.props.isOpponentSpecialField)return function(){return e.props.chooseEffectTarget(t,"opponentSpecialField")};if(e.props.isPlayerSpecialField)return function(){return e.props.chooseEffectTarget(t,"playerSpecialField")}}return function(){}},e}return Object(E.a)(n,[{key:"render",value:function(){for(var e=[],t=this.props.specialField,n=0;n<t.length;n++){var a=t[n],c=J[a.id];e.push(r.a.createElement(x.a,{key:a.id},r.a.createElement(D.a,{src:c,thumbnail:!0,className:this.props.inPopup?"targetable":"",onClick:this.onClick(a)})))}return e}}]),n}(r.a.Component),Q=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){for(var e=this,t=this.props.graveyard,n=[],a=function(a){var c=t[a],o=J[c.id];n.push(r.a.createElement(x.a,{key:c.id},r.a.createElement(D.a,{src:o,thumbnail:!0,className:e.props.inPopup?"targetable":"",onClick:e.props.inPopup?function(){return e.props.chooseEffectTarget(c)}:function(){}})))},c=0;c<t.length;c++)a(c);return r.a.createElement(j.a,{md:5},n)}}]),n}(r.a.Component),U=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.selectedCard,t=this.props.deck;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{size:"sm",variant:"success",disabled:-1!==e||0===t.length,onClick:this.props.drawCard},"Draw (",t.length,")")," ",r.a.createElement(S.a,{size:"sm",variant:"danger",disabled:0!==t.length,onClick:this.props.endTurn},"End Turn"))}}]),n}(r.a.Component),M=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.currentPlayer;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",null,"Current Turn: Player ",e),r.a.createElement("hr",null))}}]),n}(r.a.Component),_=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).scuttle=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Opponent Field"),r.a.createElement(j.a,{md:5},r.a.createElement(z,{inPopup:!0,field:e.props.opponentField,jacks:e.props.jacks,inChoosingScuttleStage:!0,chooseScuttleTarget:e.props.chooseScuttleTarget,isOpponentField:!0})))},e.effect2=function(){return r.a.createElement(j.a,null,r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Field"),r.a.createElement(j.a,{md:3},r.a.createElement(z,{inPopup:!0,field:e.props.opponentField,jacks:e.props.jacks,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isOpponentField:!0}))),r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Special Field"),r.a.createElement(j.a,{md:3},r.a.createElement(K,{inPopup:!0,specialField:e.props.opponentSpecialField,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isOpponentSpecialField:!0}))))},e.effect7=function(){for(var t=[],n=e.props.deck,a=function(a){var c=n.length-1-a,o=n[c],s=J[o.id];t.push(r.a.createElement(x.a,{key:o.id},r.a.createElement(D.a,{src:s,thumbnail:!0,className:"targetable",onClick:function(){return e.props.chooseEffectTarget(o)}})))},c=0;c<2;c++)a(c);return r.a.createElement(j.a,{md:5},t)},e.effect9=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Field"),r.a.createElement(j.a,{md:3},r.a.createElement(z,{inPopup:!0,field:e.props.opponentField,jacks:e.props.jacks,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isOpponentField:!0}))),r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Special Field"),r.a.createElement(j.a,{md:3},r.a.createElement(K,{inPopup:!0,specialField:e.props.opponentSpecialField,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isOpponentSpecialField:!0})))),r.a.createElement("hr",null),r.a.createElement(j.a,null,r.a.createElement(x.a,null,r.a.createElement("h6",null,"Your Field"),r.a.createElement(j.a,{md:5},r.a.createElement(z,{inPopup:!0,field:e.props.playerField,jacks:e.props.jacks,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isPlayerField:!0})))))},e.effectJ=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Opponent Field"),r.a.createElement(j.a,{md:5},r.a.createElement(z,{inPopup:!0,field:e.props.opponentField,jacks:e.props.jacks,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget,isOpponentField:!0})))},e.effect3=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Graveyard"),r.a.createElement(Q,{inPopup:!0,graveyard:e.props.graveyard,inChoosingEffectStage:e.props.inChoosingEffectStage,chooseEffectTarget:e.props.chooseEffectTarget}))},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.selectedCard,t=this.props.inChoosingScuttleStage,n=this.props.inChoosingEffectStage;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(r.a.Fragment,null,this.scuttle()),"2"===e.Value&&n&&r.a.createElement(r.a.Fragment,null,this.effect2()),"3"===e.Value&&n&&r.a.createElement(r.a.Fragment,null,this.effect3()),"7"===e.Value&&n&&r.a.createElement(r.a.Fragment,null,this.effect7()),"9"===e.Value&&n&&r.a.createElement(r.a.Fragment,null,this.effect9()),"Jack"===e.Value&&n&&r.a.createElement(r.a.Fragment,null,this.effectJ()))}}]),n}(r.a.Component),B=n(191),Y=function(e){Object(T.a)(n,e);var t=Object(V.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).toggleSelectedCard=function(e){a.setState({selectedCard:-1===a.state.selectedCard?e:-1},(function(){-1===a.state.selectedCard?console.log("unselected"):console.log("selectedCard id is ",a.state.selectedCard.id)}))},a.toggleGraveyard=function(){a.setState({showGraveyard:!a.state.showGraveyard})},a.drawCard=function(){a.props.moves.drawCard()},a.endTurn=function(){a.props.moves.endTurn()},a.playCardValue=function(){console.log("playCardValue: ",a.state.selectedCard.id),a.props.moves.playCardValue(a.state.selectedCard),a.setState({selectedCard:-1})},a.playCardScuttle=function(){a.props.moves.playCardScuttle()},a.playCardEffect=function(){a.props.moves.playCardEffect(a.props.playerID,a.state.selectedCard),a.setState({selectedCard:-1})},a.accept=function(){a.props.moves.accept()},a.counter=function(){a.props.moves.counter(a.props.playerID)},a.chooseScuttleTarget=function(e){console.log("scuttleCard:",a.state.selectedCard.id,"target:",e.id),a.props.moves.chooseScuttleTarget(a.state.selectedCard,e),a.setState({selectedCard:-1})},a.chooseEffectTarget=function(e,t){console.log("target:",e.id,"targetField",t),a.props.moves.chooseEffectTarget(e,t)},a.state={selectedCard:-1,showGraveyard:!1},a}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.playerID,t=String(1-parseInt(e)),n=this.props.G.hands,a=this.props.ctx.currentPlayer,c=this.props.G.graveyard,o=this.props.G.deck,s=this.props.G.fields,i=this.props.G.specialFields,l=this.state.selectedCard,u=this.props.G.jacks,p=this.props.ctx.activePlayers,d="action"===p[e],h="countering"===p[e],g="choosingEffect"===p[e],m="choosingScuttle"===p[e];return r.a.createElement("div",{className:"board-area"},r.a.createElement(f.a,null,this.props.ctx.gameover&&this.props.ctx.gameover.winner&&r.a.createElement("h1",null,"WINNER: ",this.props.playerName),this.props.ctx.gameover&&!this.props.ctx.gameover.winner&&r.a.createElement("h1",null,"DRAW!"),r.a.createElement(M,{currentPlayer:a})),r.a.createElement(f.a,null,r.a.createElement("h6",null,"Opponent Hand (",n[t].length,")"),i[e].some((function(e){return"8"===e.Value}))&&r.a.createElement(q,{playerID:t,hand:n[t]})),r.a.createElement(f.a,{className:"container-field"},r.a.createElement(B.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Field"),r.a.createElement(j.a,{md:3},r.a.createElement(z,{field:s[t],jacks:u}))),r.a.createElement(x.a,null,r.a.createElement("h6",null,"Opponent Special Field"),r.a.createElement(j.a,{md:3},r.a.createElement(K,{specialField:i[t]})))),r.a.createElement("hr",null),r.a.createElement(j.a,null,r.a.createElement(x.a,null,r.a.createElement("h6",null,"Your Field"),r.a.createElement(j.a,{md:3},r.a.createElement(z,{field:s[e],jacks:u}))),r.a.createElement(x.a,null,r.a.createElement("h6",null,"Your Special Field"),r.a.createElement(j.a,{md:3},r.a.createElement(K,{specialField:i[e]})))))),(m||g)&&r.a.createElement(f.a,{className:"border popup"},r.a.createElement("h6",null,r.a.createElement("u",null,"Choose Target")),r.a.createElement(_,{selectedCard:m?l:this.props.G.counterChain[0],deck:o,jacks:u,graveyard:c,playerField:s[e],opponentField:s[t],playerSpecialField:i[e],opponentSpecialField:i[t],inChoosingScuttleStage:m,inChoosingEffectStage:g,chooseScuttleTarget:this.chooseScuttleTarget,chooseEffectTarget:this.chooseEffectTarget})),r.a.createElement(f.a,null,r.a.createElement("h6",null,"Your Hand (",n[e].length,")"," ",-1!==l&&r.a.createElement("span",null,"(selected: ",l.id,")")),r.a.createElement(q,{hand:n[e],inActionStage:d,toggleSelectedCard:this.toggleSelectedCard})),d&&-1!==l&&r.a.createElement(f.a,null,r.a.createElement(R,{playCardValue:this.playCardValue,playCardScuttle:this.playCardScuttle,playCardEffect:this.playCardEffect,playerID:e,playerIDOpponent:t,fields:s,specialFields:i,selectedCard:l,graveyard:c,deck:o,hand:n,jacks:u})),h&&r.a.createElement(f.a,null,r.a.createElement(L,{playerID:e,accept:this.accept,counter:this.counter,has2:n[e].some((function(e){return"2"===e.Value}))})),d&&r.a.createElement(f.a,null,r.a.createElement(U,{selectedCard:l,drawCard:this.drawCard,deck:o,endTurn:this.endTurn})),r.a.createElement(f.a,null,r.a.createElement(S.a,{size:"sm",variant:"outline-secondary",disabled:0===c.length,onClick:this.toggleGraveyard},"View Graveyard (",c.length,")"),this.state.showGraveyard&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"Graveyard"),r.a.createElement(Q,{graveyard:c}))),r.a.createElement("hr",null),r.a.createElement("hr",null))}}]),n}(r.a.Component);function H(e,t,n,a){e.counterChain.push(a);var r=e.hands[n],c=r.findIndex((function(e){return e.id===a.id}));if(r.splice(c,1),["8","Jack","Queen","King"].some((function(e){return a.Value===e})))return W(e,t);"0"===n?t.events.setActivePlayers({value:{0:"idle",1:"countering"}}):t.events.setActivePlayers({value:{0:"countering",1:"idle"}})}function W(e,t){e.effectCountered?t.events.endTurn():["Ace","4","5","6","7","8","10","Queen","King"].some((function(t){return e.counterChain[0].Value===t}))?(!function(e,t){var n=t.playOrder[t.playOrderPos],a=t.playOrder[(t.playOrderPos+1)%t.playOrder.length],r=e.hands[n],c=e.hands[a],o=e.fields[n],s=e.fields[a],i=e.specialFields[n],l=e.specialFields[a],u=e.jacks,p=e.graveyard,d=e.deck;switch(e.counterChain[0].Value){case"Ace":for(console.log("reaching ace case");o.length>0;)p.push(o.pop());for(;s.length>0;)p.push(s.pop());for(var f in u){for(var h=u[f][0],g=u[f][2];g.length>0;)p.push(g.pop());delete u[h.id]}break;case"4":if(console.log("reaching 4 case"),0===c.length)console.log("bm, no cards to discard");else if(1===c.length){var m=c.splice(0,1)[0];p.push(m)}else for(var v=0;v<2;v++){var E=c.splice(Math.floor(Math.random()*c.length),1)[0];p.push(E)}break;case"5":console.log("reaching 5 case"),r.push(d.pop()),r.push(d.pop());break;case"6":for(console.log("reaching 6 case");i.length>0;)p.push(i.pop());for(;l.length>0;)p.push(l.pop());var y=function(e){var t=u[e][0],r=u[e][1],c=u[e][2];if(r!==n){var i=o.findIndex((function(e){return t.id===e.id}));if(-1!==i){var l=o.splice(i,1)[0];s.push(l)}}else if(r!==a){var d=s.findIndex((function(e){return t.id===e.id}));if(-1!==d){var f=s.splice(d,1)[0];o.push(f)}}for(;c.length>0;)p.push(c.pop());delete u[t.id]};for(var b in u)y(b);break;case"7":console.log("reaching this 7 case");for(var C=r.length-1;r.length>0;)d.push(r.pop());G(e.deck);for(var k=0;k<=C;k++)r.push(d.pop());break;case"8":case"Queen":case"King":console.log("reaching 8||Q||K case");var O=e.counterChain.splice(0,1)[0];i.push(O);break;default:console.log("default case, something went wrong")}}(e,t),t.events.endTurn()):t.events.setActivePlayers({currentPlayer:"choosingEffect",others:"idle"})}var X={name:"".concat("Scuttle"),setup:function(e){var t=function(e,t){var n=A();G(n);var a=function(e,t,n){var a={},r=t[n],c=t[(n+1)%t.length];a[r]=[],a[c]=[];for(var o=0;o<4;o++){var s=e.pop();a[r].push(s)}for(var i=0;i<5;i++){var l=e.pop();a[c].push(l)}return a}(n,e,t);return{deck:n,hands:a,fields:function(e,t){var n={},a=e[t],r=e[(t+1)%e.length];return n[a]=[],n[r]=[],n}(e,t),specialFields:function(e,t){var n={},a=e[t],r=e[(t+1)%e.length];return n[a]=[],n[r]=[],n}(e,t)}}(e.playOrder,e.playOrderPos);return{deck:t.deck,hands:t.hands,fields:t.fields,graveyard:[],specialFields:t.specialFields,counterChain:[],effectCountered:!1,jacks:{}}},turn:{onBegin:function(e,t){t.events.setActivePlayers({currentPlayer:"action",others:"idle"})},onEnd:function(e,t){!function(e){for(var t=0;t<e.counterChain.length;t++)e.graveyard.push(e.counterChain[t]);e.counterChain=[],e.effectCountered=!1}(e)},stages:{idle:{moves:{}},action:{moves:{drawCard:function(e,t){var n=e.deck.pop();e.hands[t.currentPlayer].push(n),t.events.endTurn()},endTurn:function(e,t){t.events.endTurn()},playCardValue:function(e,t,n){var a=e.hands[t.currentPlayer],r=e.fields[t.currentPlayer],c=a.findIndex((function(e){return e.id===n.id})),o=a.splice(c,1)[0];r.push(o),t.events.endTurn()},playCardScuttle:function(e,t){t.events.setActivePlayers({currentPlayer:"choosingScuttle",others:"idle"})},playCardEffect:H}},countering:{moves:{accept:W,counter:function(e,t,n){var a=e.hands[n],r=a.findIndex((function(e){return"2"===e.Value}));e.effectCountered=!e.effectCountered,H(e,t,n,a[r])}}},choosingScuttle:{moves:{chooseScuttleTarget:function(e,t,n,a){var r=t.playOrder[t.playOrderPos],c=t.playOrder[(t.playOrderPos+1)%t.playOrder.length],o=e.hands[r],s=e.fields[c],i=o.find((function(e){return e.id===n.id})),l=s.find((function(e){return e.id===a.id})),u="Ace"===i.Value?"1":parseInt(i.Value),p="Ace"===l.Value?"1":parseInt(l.Value);if(parseInt(u)>=parseInt(p)){var d=o.findIndex((function(e){return e.id===n.id})),f=o.splice(d,1)[0],h=s.findIndex((function(e){return e.id===a.id})),g=s.splice(h,1)[0],m=e.jacks;if(m[a.id]){for(var v=m[a.id][0],E=m[a.id][2];E.length>0;)e.graveyard.push(E.pop());delete m[v.id]}e.graveyard.push(f),e.graveyard.push(g),t.events.endTurn()}else console.log("playCardScuttle error, scuttle failed"),t.events.setActivePlayers({currentPlayer:"action",others:"idle"})}}},choosingEffect:{moves:{chooseEffectTarget:function(e,t,n,a){(function(e,t,n,a){var r=t.playOrder[t.playOrderPos],c=t.playOrder[(t.playOrderPos+1)%t.playOrder.length],o=e.fields[r],s=e.fields[c],i=e.specialFields[c],l=e.hands[r],u=e.jacks,p=e.graveyard,d=e.deck,f=e.counterChain[0],h=i.filter((function(e){return"Queen"===e.Value})).length;switch(f.Value){case"2":if(console.log("reaching 2 case"),h>0&&"Queen"!==n.Value)return console.log("queen is up, have to choose queen in opponent specialfield"),!1;if("opponentSpecialField"===a){var g=i.findIndex((function(e){return e.id===n.id})),m=i.splice(g,1)[0];p.push(m)}else if("opponentField"===a){if(!u[n.id])return console.log("did not select a jacked card"),!1;var v=u[n.id][2],E=v.findIndex((function(e){return"Jack"===e.Value})),y=v.splice(E,1)[0];p.push(y),0===v.length&&delete u[n.id];var b=s.findIndex((function(e){return e.id===n.id})),C=s.splice(b,1)[0];o.push(C)}break;case"3":console.log("reaching 3 case");var k=e.graveyard.findIndex((function(e){return e.id===n.id})),O=e.graveyard.splice(k,1)[0];l.push(O);break;case"9":if(console.log("reaching 9 case",a),h>0&&"Queen"!==n.Value)return console.log("queen is up, have to choose queen in opponent specialfield"),!1;if("opponentSpecialField"===a){var j=i.findIndex((function(e){return e.id===n.id})),x=i.splice(j,1)[0];d.push(x)}else if("opponentField"===a||"playerField"===a)if(u[n.id]){console.log("sanity check for 9",n.id,u[n.id][0].id);var S=u[n.id][2],F=S.findIndex((function(e){return"Jack"===e.Value})),w=S.splice(F,1)[0];if(d.push(w),0===S.length&&delete u[n.id],"opponentField"===a){var I=s.findIndex((function(e){return e.id===n.id})),P=s.splice(I,1)[0];o.push(P)}}else if("opponentField"===a){var T=s.findIndex((function(e){return e.id===n.id})),V=s.splice(T,1)[0];d.push(V)}else{var D=o.findIndex((function(e){return e.id===n.id})),N=o.splice(D,1)[0];d.push(N)}break;case"Jack":console.log("reaching jack case");var A=e.counterChain.splice(0,1)[0];u[n.id]?u[n.id][2].push(A):u[n.id]=[n,c,[A]];var G=s.findIndex((function(e){return e.id===n.id})),J=s.splice(G,1)[0];o.push(J);break;default:console.log("default case, something went wrong")}return!0})(e,t,n,a)&&t.events.endTurn()}}}}},endIf:function(e,t){return function(e,t){var n=t.currentPlayer,a=e.fields[n],r=e.specialFields[n];return a.map((function(e){return e.Point})).reduce((function(e,t){return e+t}),0)>=21-7*r.filter((function(e){return"King"===e.Value})).length}(e,t)?{winner:t.currentPlayer}:function(e,t){var n=t.playOrder[t.playOrderPos],a=t.playOrder[(t.playOrderPos+1)%t.playOrder.length],r=e.hands[n],c=e.hands[a];return 0===e.deck.length&&(r.every((function(e){return"Jack"===e.Value}))||0===r.length)&&c.every((function(e){return"Jack"===e.Value||0===c.length}))}(e,t)?{draw:!0}:void 0},onEnd:function(e,t){t.events.setActivePlayers({value:{0:"idle",1:"idle"}})}};var Z=new O,$=window.location,ee=$.origin,te=($.protocol,$.hostname,ee),ne=Object(I.a)({game:X,board:Y,debug:!0,multiplayer:Object(P.b)({server:te})}),ae=function(e){var t=e.history,n=Object(s.h)().id,c=Object(a.useState)([]),o=Object(d.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(!1),p=Object(d.a)(u,2),f=p[0],h=p[1];Object(a.useEffect)((function(){var e=setInterval((function(){Z.getPlayers(n).then((function(e){l(e),e.filter((function(e){return e.name})).length===e.length&&h(!0)}),(function(){t.push("",{invalidRoom:!0})}))}),500);return f&&clearInterval(e),function(){clearInterval(e)}}),[f,i.length,n,t]);return f?r.a.createElement(ne,{gameID:n,playerID:localStorage.getItem("id"),credentials:localStorage.getItem("credentials")}):r.a.createElement(m,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{className:"border"},r.a.createElement("h6",null,"Room ID:"),r.a.createElement("span",null,r.a.createElement("input",{id:"roomID",value:n,readOnly:!0})," ",r.a.createElement(S.a,{size:"sm",variant:"outline-secondary",onClick:function(e){document.getElementById("roomID").select(),document.execCommand("copy"),e.target.focus()}},"Copy"))),r.a.createElement(x.a,{className:"border"},r.a.createElement("h6",null,"Players"),r.a.createElement("div",null,i.map((function(e){return e.name?e.name:"\n"}))))),r.a.createElement("h6",null,"Game will begin once all players have joined."),r.a.createElement(S.a,{size:"sm",variant:"danger",onClick:function(){Z.leaveRoom(n,localStorage.getItem("id"),localStorage.getItem("credentials")).then((function(){t.push("/")}))}},"Leave Room"))},re=(n(183),n(184),function(){var e=Object(s.g)();return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(w,{history:e})),r.a.createElement(s.b,{exact:!0,path:"/rooms/:id"},r.a.createElement(ae,{history:e})),r.a.createElement(s.a,{to:"/"}))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(re,null))),document.getElementById("root"))}]),[[102,1,2]]]);
//# sourceMappingURL=main.07091958.chunk.js.map